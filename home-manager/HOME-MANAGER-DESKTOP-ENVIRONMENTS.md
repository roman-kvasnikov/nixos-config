# Home Manager Desktop Environments Migration Guide

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è desktop environments –≤ Home Manager, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ø–æ–ª–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é NixOS –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Home Manager

```
home-manager/
‚îú‚îÄ‚îÄ desktop-environments/
‚îÇ   ‚îú‚îÄ‚îÄ gnome.nix           # –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GNOME (Home Manager)
‚îÇ   ‚îú‚îÄ‚îÄ hyprland.nix        # –®–∞–±–ª–æ–Ω –¥–ª—è Hyprland (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
‚îÇ   ‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ desktop.nix        # –°–µ–ª–µ–∫—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–æ–≤—ã–π)
‚îÇ   ‚îú‚îÄ‚îÄ default.nix        # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ gtk.nix           # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω)
‚îÇ   ‚îî‚îÄ‚îÄ xdg.nix           # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω)
‚îî‚îÄ‚îÄ modules/
    ‚îú‚îÄ‚îÄ dconf/            # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã)
    ‚îú‚îÄ‚îÄ stylix.nix        # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω)
    ‚îî‚îÄ‚îÄ ... (–¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏)
```

## üñ•Ô∏è GNOME Home Manager –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í –Ω–æ–≤–æ–º `home-manager/desktop-environments/gnome.nix` —Å–æ–±—Ä–∞–Ω—ã **–í–°–ï** GNOME-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### üìã dconf –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ **–ò–º–ø–æ—Ä—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª–µ–π**: `../modules/dconf` (–≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è)
- ‚úÖ **GNOME Shell**: —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, keybindings, interface
- ‚úÖ **Mutter**: window manager –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ **Desktop**: session, input-sources, app-folders
- ‚úÖ **Shell extensions**: dash-to-dock, auto-move-windows, just-perfection

### üé® –¢–µ–º—ã –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è:
- ‚úÖ **GTK3 bookmarks**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Files/Nautilus
- ‚úÖ **Stylix GNOME target**: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- ‚úÖ **–®—Ä–∏—Ñ—Ç—ã**: Ubuntu Nerd Font family –¥–ª—è GNOME
- ‚úÖ **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞**: GTK_THEME –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

### üîó XDG –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- ‚úÖ **MIME –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏**: –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ —Å GNOME –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**: Desktop, Documents, Downloads, etc.
- ‚úÖ **–§–∞–π–ª–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GNOME

### üì¶ GNOME –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- ‚úÖ **–°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã**: gnome-tweaks, dconf-editor
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ GNOME Shell extensions
- ‚úÖ **–¢–µ–º—ã**: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ GTK —Ç–µ–º—ã –∏ –∏–∫–æ–Ω–∫–∏

### üîß Environment –∏ —Å–µ—Ä–≤–∏—Å—ã:
- ‚úÖ **GTK variables**: GTK_THEME, GDK_BACKEND, CLUTTER_BACKEND
- ‚úÖ **GNOME Keyring**: –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π
- ‚úÖ **Wayland –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: –¥–ª—è GNOME –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## üöÄ Hyprland —à–∞–±–ª–æ–Ω (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

–í `hyprland.nix` —Å–æ–∑–¥–∞–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –±—É–¥—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

### ü™ü Window Manager:
- `wayland.windowManager.hyprland` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Keybindings –∏ –ø—Ä–∞–≤–∏–ª–∞ –æ–∫–æ–Ω
- Workspaces –∏ –º–æ–Ω–∏—Ç–æ—Ä—ã

### üìä –ü–∞–Ω–µ–ª–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã:
- `programs.waybar` - —Å—Ç–∞—Ç—É—Å-–±–∞—Ä
- `programs.wofi` - application launcher
- `services.mako` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `programs.swaylock` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–∞

### üõ†Ô∏è Wayland —É—Ç–∏–ª–∏—Ç—ã:
- Screenshot tools (grim, slurp, swappy)
- Clipboard management (wl-clipboard)
- Screen recording (wf-recorder)
- Media controls (playerctl)

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üéØ **–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**:

#### NixOS —É—Ä–æ–≤–µ–Ω—å (`nixos/desktop-environments/`):
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–ª—É–∂–±—ã (GDM, audio, graphics)
- Display managers –∏ window managers
- Hardware acceleration –∏ –¥—Ä–∞–π–≤–µ—Ä—ã
- System-wide –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### Home Manager —É—Ä–æ–≤–µ–Ω—å (`home-manager/desktop-environments/`):
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ç–µ–º—ã
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è  
- Personal configuration (dconf, gtk)
- User-specific integration

### üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**:
```bash
# NixOS —É—Ä–æ–≤–µ–Ω—å
# nixos/modules/desktop.nix
imports = [ ../desktop-environments/gnome.nix ];

# Home Manager —É—Ä–æ–≤–µ–Ω—å  
# home-manager/config/desktop.nix
imports = [ ../desktop-environments/gnome.nix ];
```

### ‚ú® **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**:
- **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è**: –∫–∞–∂–¥–æ–µ DE –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: system + user –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ß–∏—Å—Ç–æ—Ç–∞**: –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### ‚ö†Ô∏è –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –ù–ï –∏–∑–º–µ–Ω–µ–Ω—ã:
- **`modules/dconf/`** - –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GNOME —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- **`modules/stylix.nix`** - —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **`config/gtk.nix`** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ GTK –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **`packages.nix`** - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–∫–µ—Ç—ã
- **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏** –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ø–æ–ª–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é:
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ –ø–æ–ª–æ–º–æ–∫
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏—è

### –≠—Ç–∞–ø 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–µ–∫—É—â–∏–π)
```nix
# –í home.nix –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
imports = [
  ./config/desktop.nix  # –ù–æ–≤—ã–π –º–æ–¥—É–ª—å
  # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ imports –æ—Å—Ç–∞—é—Ç—Å—è
];
```

### –≠—Ç–∞–ø 2: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```nix
# –ó–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ imports –Ω–∞:
imports = [
  ./config/desktop.nix  # –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ
  # –£–±—Ä–∞—Ç—å —Å—Ç–∞—Ä—ã–µ dconf, stylix, gtk imports
];
```

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### ‚ú® –ë–ª–∏–∂–∞–π—à–∏–µ —Ü–µ–ª–∏:
1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GNOME –º–æ–¥—É–ª—è** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
2. **–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Hyprland** –º–æ–¥—É–ª—è
3. **–°–æ–∑–¥–∞–Ω–∏–µ KDE Plasma** –º–æ–¥—É–ª—è
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NixOS** desktop-environments

### üöÄ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã:
- **–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É NixOS –∏ Home Manager
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä** –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **Plugin —Å–∏—Å—Ç–µ–º–∞** –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- **GUI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π

## üõ†Ô∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π GNOME:
1. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `config/desktop.nix` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ø–æ –∂–µ–ª–∞–Ω–∏—é

### –î–ª—è –Ω–æ–≤—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `desktop.nix` —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
2. –í—ã–±—Ä–∞—Ç—å –∂–µ–ª–∞–µ–º–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
3. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É DE

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç foundation –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö desktop environments —Å —á–∏—Å—Ç—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫! üéØ